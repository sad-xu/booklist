<!DOCTYPE html>
	<html lang=zh>
		<head>
			<meta charset=utf-8>
			<meta content="width=device-width,initial-scale=1"name=viewport>
		</head>
		<body>
			<div>
				<canvas height="600" width="1300"></canvas>
			</div>

			<script src="https://d3js.org/d3.v5.min.js"></script>
			<script src=./relation.js></script>
			<script>
				function initNodeStyle(d) {
					let colors = ["#007FFF","#A142FF",
						"#FF85C2","#FFA142","#FF4242"]
					d.forEach((item, index) => {
						let t = d3.color(colors[index % 5])
						item.color = t.brighter(1.5).toString() // 颜色
						item.radius = 14   // 半径
					})
				}

				var canvas = document.querySelector("canvas"),
					width = 1300,
					height = 600;
				let nodeData = [ { id: 'express', name: 'express' },
  { id: './app.js', name: './app.js' },
  { id: 'body-parser', name: 'body-parser' },
  { id: './router/api.js', name: './router/api.js' },
  { id: 'redis', name: 'redis' } ];

				let linkData = [ { source: 'express', target: './app.js' },
  { source: 'body-parser', target: './app.js' },
  { source: './router/api.js', target: './app.js' },
  { source: 'express', target: './router/api.js' },
  { source: 'redis', target: './router/api.js' } ]
				

				initNodeStyle(nodeData)  // 初始化节点样式

				console.log(linkData)
				const s = new Relation()
				s.setNodes(nodeData)
				s.setLinks(linkData)
				s.setCanvas(canvas)
				s.setSize(width, height)
				s.setRadius(12)
				s.setLinkLength(90)
				s.setCharge(-60)
				s.init()
				s.run()
			</script>
		</body>